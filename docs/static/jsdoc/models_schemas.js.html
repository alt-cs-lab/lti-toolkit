<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/schemas.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/schemas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Database schemas
 * @author Russell Feldhausen &lt;russfeld@ksu.edu>
 */

// Import libraries
import Sequelize from "sequelize";

/**
 * @swagger
 * components:
 *   schemas:
 *     Consumer:
 *       type: object
 *       required:
 *         - name
 *         - key
 *       properties:
 *         id:
 *           type: integer
 *           description: autogenerated id
 *         name:
 *           type: string
 *           description: name of the consumer
 *         lti13:
 *           type: boolean
 *           description: enabled if consumer uses LTI 1.3
 *         key:
 *           type: string
 *           description: the OAuth consumer key or LTI 1.3 unique URL path
 *         client_id:
 *           type: string
 *           description: the LTI 1.3 client ID
 *         platform_id:
 *           type: string
 *           description: the LTI 1.3 platform ID
 *         deployment_id:
 *           type: string
 *           description: the LTI 1.3 deployment ID
 *         keyset_url:
 *           type: string
 *           format: url
 *           description: the URL to request the JWKS
 *         token_url:
 *           type: string
 *           format: url
 *           description: the URL to request a token
 *         auth_url:
 *           type: string
 *           format: url
 *           description: the URL to redirect to for authentication
 *         tc_product:
 *           type: string
 *           description: the product name of the tool consumer
 *         tc_version:
 *           type: string
 *           description: the version of the tool consumer
 *         tc_guid:
 *           type: string
 *           description: the unique GUID of the tool consumer
 *         tc_name:
 *           type: string
 *           description: the internal name of the tool consumer
 *         createdAt:
 *           type: string
 *           format: date-time
 *           description: when the record was created
 *         updatedAt:
 *           type: string
 *           format: date-time
 *           description: when the record was last updated
 *       example:
 *           id: 1
 *           name: Canvas
 *           lti13: true
 *           key: abcdef12345
 *           client_id: 1000000000001
 *           platform_id: https://canvas.instructure.com
 *           deployment_id: superlongstringhere
 *           keyset_url: https://canvas.instructure.com/api/lti/security/jwks
 *           token_url: https://canvas.instructure.com/login/oauth2/token
 *           auth_url: https://canvas.instructure.com/api/lti/authorize_redirect
 *           createdAt: 2025-02-04T15:36:32.000Z
 *           updatedAt: 2025-02-04T15:36:32.000Z
 */
const ConsumerSchema = {
  id: {
    type: Sequelize.INTEGER,
    primaryKey: true,
    autoIncrement: true,
  },
  name: {
    type: Sequelize.STRING,
    unique: true,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("name", value === "" ? null : value);
    },
  },
  lti13: {
    type: Sequelize.BOOLEAN,
    defaultValue: false,
  },
  key: {
    type: Sequelize.STRING,
    unique: true,
    allowNull: false,
  },
  client_id: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  platform_id: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  deployment_id: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  keyset_url: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  token_url: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  auth_url: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  tc_product: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  tc_version: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  tc_guid: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  tc_name: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  createdAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
  updatedAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
};

const ConsumerKeySchema = {
  key: {
    type: Sequelize.STRING,
    primaryKey: true,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("key", value === "" ? null : value);
    },
  },
  secret: {
    type: Sequelize.STRING,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("secret", value === "" ? null : value);
    },
  },
  public: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  private: {
    type: Sequelize.STRING,
    allowNull: true,
  },
};

const ConsumerLoginSchema = {
  key: {
    type: Sequelize.STRING,
    primaryKey: true,
    allowNull: false,
  },
  state: {
    type: Sequelize.STRING,
    primaryKey: true,
    allowNull: false,
  },
  nonce: {
    type: Sequelize.STRING,
    primaryKey: true,
    allowNull: false,
  },
  iss: {
    type: Sequelize.STRING,
    allowNull: false,
  },
  client_id: {
    type: Sequelize.STRING,
    allowNull: false,
  },
  keyset_url: {
    type: Sequelize.STRING,
    allowNull: false,
  },
  createdAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
  updatedAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
};

const OauthNonceSchema = {
  key: {
    type: Sequelize.STRING,
    allowNull: false,
    primaryKey: true,
  },
  nonce: {
    type: Sequelize.STRING,
    allowNull: false,
    primaryKey: true,
  },
  createdAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
  updatedAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
};

/**
 * @swagger
 * components:
 *   schemas:
 *     Provider:
 *       type: object
 *       required:
 *         - name
 *         - key
 *         - launch_url
 *         - domain
 *       properties:
 *         id:
 *           type: integer
 *           description: autogenerated id
 *         name:
 *           type: string
 *           description: name of the provider
 *         lti13:
 *           type: boolean
 *           description: enabled if provider uses LTI 1.3
 *         key:
 *           type: string
 *           description: the OAuth provider key or LTI 1.3 unique URL path
 *         launch_url:
 *           type: string
 *           format: url
 *           description: the URL to send a launch
 *         domain:
 *           type: string
 *           format: hostname
 *           description: the domain of the application
 *         custom:
 *           type: string
 *           format: json
 *           description: a JSON string of custom variables
 *         use_section:
 *           type: boolean
 *           description: whether to use the section ID in the launch
 *         createdAt:
 *           type: string
 *           format: date-time
 *           description: when the record was created
 *         updatedAt:
 *           type: string
 *           format: date-time
 *           description: when the record was last updated
 *       example:
 *           id: 1
 *           name: Learning Tool
 *           lti13: false
 *           key: abcdef12345
 *           launch_url: https://tool.domain/lti/12345abcdef
 *           domain: tool.domain
 *           createdAt: 2025-02-04T15:36:32.000Z
 *           updatedAt: 2025-02-04T15:36:32.000Z
 */
const ProviderSchema = {
  id: {
    type: Sequelize.INTEGER,
    primaryKey: true,
    autoIncrement: true,
  },
  name: {
    type: Sequelize.STRING,
    unique: true,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("name", value === "" ? null : value);
    },
  },
  lti13: {
    type: Sequelize.BOOLEAN,
    defaultValue: false,
  },
  key: {
    type: Sequelize.STRING,
    unique: true,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("key", value === "" ? null : value);
    },
  },
  launch_url: {
    type: Sequelize.STRING,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("launch_url", value === "" ? null : value);
    },
  },
  domain: {
    type: Sequelize.STRING,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("domain", value === "" ? null : value);
    },
  },
  custom: {
    type: Sequelize.STRING,
    allowNull: true,
  },
  createdAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
  updatedAt: {
    type: Sequelize.DATE,
    allowNull: false,
  },
};

const ProviderKeySchema = {
  key: {
    type: Sequelize.STRING,
    primaryKey: true,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("key", value === "" ? null : value);
    },
  },
  secret: {
    type: Sequelize.STRING,
    allowNull: false,
    // force null if empty string
    set(value) {
      this.setDataValue("secret", value === "" ? null : value);
    },
  },
};

export {
  ConsumerSchema,
  ConsumerKeySchema,
  ConsumerLoginSchema,
  OauthNonceSchema,
  ProviderSchema,
  ProviderKeySchema,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="config_database.module_js.html">config/database.js</a></li><li><a href="config_logger.module_js.html">config/logger.js</a></li><li><a href="config_migrations.module_js.html">config/migrations.js</a></li><li><a href="controllers_consumer.module_js.html">controllers/consumer.js</a></li><li><a href="controllers_lti.module_js.html">controllers/lti.js</a></li><li><a href="controllers_provider.module_js.html">controllers/provider.js</a></li><li><a href="lib_lti10.module_js.html">lib/lti10.js</a></li><li><a href="lib_lti13.module_js.html">lib/lti13.js</a></li><li><a href="migrations_00_consumers.module_js.html">migrations/00_consumers.js</a></li><li><a href="migrations_00_providers.module_js.html">migrations/00_providers.js</a></li><li><a href="routes_consumer.module_js.html">routes/consumer.js</a></li><li><a href="routes_provider.module_js.html">routes/provider.js</a></li></ul><h3>Classes</h3><ul><li><a href="controllers_consumer.module_js-ConsumerController.html">ConsumerController</a></li><li><a href="controllers_lti.module_js-LTIToolkitController.html">LTIToolkitController</a></li><li><a href="controllers_provider.module_js-ProviderController.html">ProviderController</a></li><li><a href="lib_lti10.module_js-LTI10Utils.html">LTI10Utils</a></li><li><a href="lib_lti13.module_js-LTI13Utils.html">LTI13Utils</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ConsumerSchema">ConsumerSchema</a></li><li><a href="global.html#ProviderSchema">ProviderSchema</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jan 19 2026 19:48:32 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
